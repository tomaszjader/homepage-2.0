<div class="blog-page">
  <app-navbar-section></app-navbar-section>

  <main class="blog">
    <div class="blog__header-container">
      <h2 class="blog__header">{{ 'BLOG.TITLE' | translate }}</h2>
      <p class="blog__description">{{ 'BLOG.DESCRIPTION' | translate }}</p>

      <div class="blog__search">
        <div class="blog__search-input-wrapper">
          <input type="text" [(ngModel)]="searchText" (input)="onSearchInput()" (keydown.enter)="onSearchEnter()"
            [placeholder]="'BLOG.SEARCH_PLACEHOLDER' | translate" class="blog__search-input">
          <button *ngIf="isSemanticSearchEnabled" (click)="performSemanticSearch()" class="blog__search-button"
            [disabled]="isSearching || searchText.length < 3">
            {{ 'BLOG.SEARCH_BUTTON' | translate }}
          </button>
        </div>

        <div class="blog__search-toggle">
          <label class="switch">
            <input type="checkbox" [checked]="isSemanticSearchEnabled" (change)="toggleSemanticSearch()">
            <span class="slider round"></span>
          </label>
          <span class="blog__search-toggle-label">{{ 'BLOG.SEMANTIC_SEARCH_LABEL' | translate }}</span>
        </div>
      </div>

      <div class="blog__loading" *ngIf="isSearching">
        <div class="spinner"></div>
        <span>{{ 'BLOG.SEARCHING_TEXT' | translate }}</span>
      </div>

      <div class="blog__active-filter" *ngIf="activeTag">
        <span>{{ 'BLOG.FILTERED_BY_TAG' | translate }} <strong>{{ activeTag }}</strong></span>
        <a [routerLink]="['/blog']" [queryParams]="{}" class="blog__clear-filter">{{ 'BLOG.CLEAR_FILTER' | translate }}
          &times;</a>
      </div>
    </div>

    <div class="blog__grid">
      <article class="blog-card" *ngFor="let post of filteredPosts">
        <div class="blog-card__top">
          <div class="blog-card__dot"></div>
          <div class="blog-card__dot"></div>
          <div class="blog-card__dot"></div>
        </div>
        <div class="blog-card__content">
          <span class="blog-card__date">{{ post.date }}</span>
          <h2 class="blog-card__title">
            <a [routerLink]="['/blog', post.slug]">{{ post.title }}</a>
          </h2>
          <p class="blog-card__excerpt">{{ post.excerpt }}</p>

          <div class="blog-card__tags" *ngIf="post.tags && post.tags.length > 0">
            <a *ngFor="let tag of post.tags" [routerLink]="['/blog']" [queryParams]="{ tag: tag }"
              class="blog-card__tag">
              #{{ tag }}
            </a>
          </div>

          <div class="blog-card__buttons">
            <a [routerLink]="['/blog', post.slug]" class="blog-card__button">
              {{ 'BLOG.READ_ARTICLE' | translate }} <span aria-hidden="true">&rarr;</span>
            </a>
          </div>
        </div>
      </article>
    </div>

    <div class="back-link">
      <a routerLink="/" class="back-link__anchor">&larr; {{ 'BLOG.BACK_TO_HOME' | translate }}</a>
    </div>
  </main>

  <app-footer-section></app-footer-section>
</div>